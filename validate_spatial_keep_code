        

    # def validate_spatial(self, fanout_X: int, fanout_Y: int):
    #     has_X = self.spatial_X.notempty_recursive()
    #     has_Y = self.spatial_Y.notempty_recursive()
    #     has_spatial = self.spatial.notempty_recursive()
    #     if has_X and fanout_X == 1:
    #         logging.warning(
    #             f"Spatial_X constraint is set for {self.name}, but fanout_X is 1. "
    #             f"The constraint will be ignored."
    #         )
    #     if has_Y and fanout_Y == 1:
    #         logging.warning(
    #             f"Spatial_Y constraint is set for {self.name}, but fanout_Y is 1. "
    #             f"The constraint will be ignored."
    #         )
    #     if has_spatial and (has_X or has_Y):
    #         raise ValueError(
    #             f"{self.name} has a \"spatial\" constraint, but has fanout in both "
    #             "X and Y dimensions. Please specify spatial_X and spatial_Y constraints "
    #             "instead."
    #         )
    #     if has_spatial and (has_X or has_Y):
    #         raise ValueError(
    #             f"{self.name} has a \"spatial\" constraint, and a \"spatial_X\" or "
    #             "\"spatial_Y\" constraint. Please specify either one \"spatial\" constraint "
    #             "or both \"spatial_X\" and \"spatial_Y\" constraints."
    #         )
            
    def get_spatial_constraint(self, for_X: bool=False, for_Y: bool=False) -> "Spatial":
        base = copy.deepcopy(self.spatial)
        if for_X:
            base.combine(self.spatial_X)
        elif for_Y:
            base.combine(self.spatial_Y)
        return base
        
        # if not for_X and not for_Y:
        #     raise ValueError(
        #         f"{self.name} has no spatial constraints. Please specify either "
        #         "spatial_X or spatial_Y constraints."
        #     )
        # if for_X and self.spatial_X.notempty_recursive():
        #     return self.spatial_X
        # if for_Y and self.spatial_Y.notempty_recursive():
        #     return self.spatial_Y
        # return self.spatial
