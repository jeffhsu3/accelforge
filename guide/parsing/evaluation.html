
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Expression Evaluation &#8212; accelforge 0.1.0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../_static/documentation_options.js?v=01f34227"></script>
    <script src="../../_static/doctools.js?v=fd6eb6e6"></script>
    <script src="../../_static/sphinx_highlight.js?v=6ffebe34"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'guide/parsing/evaluation';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="YAML Parsing" href="yaml_parsing.html" />
    <link rel="prev" title="Workload and Renames Specification" href="../spec/workload.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/logo.svg" class="logo__image only-light" alt="accelforge 0.1.0 documentation - Home"/>
    <img src="../../_static/logo.svg" class="logo__image only-dark pst-js-only" alt="accelforge 0.1.0 documentation - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../guide.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../modules.html">
    API Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../citation.html">
    Citing AccelForge
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../contributing.html">
    Contributing
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../guide.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../modules.html">
    API Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../citation.html">
    Citing AccelForge
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../contributing.html">
    Contributing
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../spec.html">Input Specifications</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../spec/architecture.html">Arch Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spec/mapping.html">Mapping Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spec/workload.html">Workload and Renames Specification</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Expression Evaluation</a></li>

<li class="toctree-l2"><a class="reference internal" href="yaml_parsing.html">YAML Parsing</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../modeling.html">How Modeling Works</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../modeling/component_energy_area.html">Component Energy and Area</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modeling/accelerator_energy_latency.html">Accelerator Energy, Area, and Latency</a></li>
<li class="toctree-l2"><a class="reference internal" href="../modeling/mapping.html">Mapping with Fast &amp; Fusiest</a></li>

</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../definitions.html">Definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faqs.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../timeloop_compare.html">Migrating from Timeloop</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../guide.html" class="nav-link">User Guide</a></li>
    
    
    <li class="breadcrumb-item"><a href="../spec.html" class="nav-link">Input Specifications</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Expression Evaluation</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="expression-evaluation">
<h1>Expression Evaluation<a class="headerlink" href="#expression-evaluation" title="Link to this heading">#</a></h1>
<p>Objects can include expressions that are evaluated when the
<a class="reference internal" href="../../accelforge.frontend.html#accelforge.frontend.spec.Spec" title="accelforge.frontend.spec.Spec"><code class="xref py py-class docutils literal notranslate"><span class="pre">Spec</span></code></a> is evaluated. Evaluation occurs when the
<a class="reference internal" href="../../accelforge.frontend.html#accelforge.frontend.spec.Spec" title="accelforge.frontend.spec.Spec"><code class="xref py py-func docutils literal notranslate"><span class="pre">Spec()</span></code></a> is going to be used to model the energy, area,
or latency of an accelerator, such as when the
<a class="reference internal" href="../../accelforge.frontend.html#accelforge.frontend.spec.Spec.calculate_component_area_energy_latency_leak" title="accelforge.frontend.spec.Spec.calculate_component_area_energy_latency_leak"><code class="xref py py-func docutils literal notranslate"><span class="pre">calculate_component_area_energy_latency_leak()</span></code></a>
method is called.</p>
<p>To-be-evaluated expressions can include Python code, and supported
operations include many standard library functions (<em>e.g.,</em> <code class="docutils literal notranslate"><span class="pre">range</span></code>, <code class="docutils literal notranslate"><span class="pre">min</span></code>) and
functions from the <code class="docutils literal notranslate"><span class="pre">math</span></code> standard library (<em>e.g.,</em> <code class="docutils literal notranslate"><span class="pre">log2</span></code>, <code class="docutils literal notranslate"><span class="pre">ceil</span></code>).</p>
<p>The scope available for evaluation includes the following in order of increasing
precedence:</p>
<ul class="simple">
<li><p>Variables defined in a top-level <a class="reference internal" href="../../accelforge.frontend.html#accelforge.frontend.variables.Variables" title="accelforge.frontend.variables.Variables"><code class="xref py py-class docutils literal notranslate"><span class="pre">Variables</span></code></a>
object.</p></li>
<li><p>Variables defined in outer-level YAML objects. Dictionary keys can be referenced by
names, and list entries by index. The dot syntax can be used to access dictionaries;
for example, <code class="docutils literal notranslate"><span class="pre">x.y.z</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">outer_scope[&quot;x&quot;][&quot;y&quot;][&quot;z&quot;]</span></code>.</p></li>
<li><p>Variables defined in the current YAML object. Dictionary keys may reference each other
as long as references are not cyclic.</p></li>
</ul>
<p>The following is an example of valid evaluated data:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">variables</span><span class="p">:</span>
<span class="w">  </span><span class="nt">a</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">123</span>
<span class="w">  </span><span class="nt">b</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">a + 5</span>
<span class="w">  </span><span class="nt">c</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">min(b, 3)</span>
<span class="w">  </span><span class="nt">d</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sum(y for y in range(1, 10))</span>

<span class="c1"># In some later scope</span>
<span class="nn">...</span><span class="w"> </span><span class="nt">outer_scope</span><span class="p">:</span>
<span class="w">  </span><span class="nt">x</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">123</span>
<span class="w">  </span><span class="nt">y</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">a + x</span><span class="w"> </span><span class="c1"># Reference top-level variables</span>
<span class="w">  </span><span class="nt">inner_scope</span><span class="p">:</span>
<span class="w">      </span><span class="nt">a</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span><span class="w"> </span><span class="c1"># Override outer scope</span>
<span class="w">      </span><span class="nt">b</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">outer_scope.x</span>
<span class="w">      </span><span class="c1"># Statements can be out-of-order if not cyclic referencing</span>
<span class="w">      </span><span class="nt">firt_item</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">second_item</span>
<span class="w">      </span><span class="nt">second_item</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3</span>
</pre></div>
</div>
<p>Additionally, values can be set directly in Python code. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">accelforge.frontend.arch</span> <span class="kn">import</span> <span class="n">ComponentAttributes</span>
<span class="n">attributes</span> <span class="o">=</span> <span class="n">ComponentAttributes</span><span class="p">(</span>
  <span class="n">value1</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span>
  <span class="n">value2</span><span class="o">=</span><span class="s2">&quot;value1 + 5&quot;</span>
  <span class="c1"># ... other attributes</span>
<span class="p">)</span>
</pre></div>
</div>
<section id="included-functions">
<h2>Included Functions<a class="headerlink" href="#included-functions" title="Link to this heading">#</a></h2>
<p>The following are available functions. In addition to the below, Python keywords that
are available witout import (<em>e.g.,</em> <code class="docutils literal notranslate"><span class="pre">min</span></code>) are also available</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ceil</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.ceil" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.ceil()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">comb</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.comb" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.comb()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">copysign</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.copysign" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.copysign()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fabs</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.fabs" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.fabs()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">factorial</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.factorial" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.factorial()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">floor</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.floor" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.floor()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fmod</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.fmod" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.fmod()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">frexp</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.frexp" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.frexp()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fsum</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.fsum" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.fsum()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gcd</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.gcd" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.gcd()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isclose</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.isclose" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.isclose()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isfinite</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.isfinite" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.isfinite()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isinf</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.isinf" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.isinf()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isnan</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.isnan" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.isnan()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isqrt</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.isqrt" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.isqrt()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ldexp</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.ldexp" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.ldexp()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">modf</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.modf" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.modf()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">perm</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.perm" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.perm()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">prod</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.prod" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.prod()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">remainder</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.remainder" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.remainder()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">trunc</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.trunc" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.trunc()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">exp</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.exp" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.exp()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">expm1</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.expm1" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.expm1()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">log</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.log" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.log()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">log1p</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.log1p" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.log1p()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">log2</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.log2" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.log2()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">log10</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.log10" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.log10()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pow</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.pow" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.pow()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sqrt</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.sqrt" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.sqrt()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">acos</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.acos" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.acos()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">asin</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.asin" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.asin()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">atan</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.atan" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.atan()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">atan2</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.atan2" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.atan2()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cos</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.cos" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.cos()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dist</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.dist" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.dist()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hypot</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.hypot" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.hypot()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sin</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.sin" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.sin()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tan</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.tan" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.tan()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">degrees</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.degrees" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.degrees()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">radians</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.radians" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.radians()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">acosh</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.acosh" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.acosh()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">asinh</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.asinh" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.asinh()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">atanh</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.atanh" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.atanh()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cosh</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.cosh" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.cosh()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sinh</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.sinh" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.sinh()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tanh</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.tanh" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.tanh()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">erf</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.erf" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.erf()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">erfc</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.erfc" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.erfc()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gamma</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.gamma" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.gamma()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lgamma</span></code>: <a class="reference external" href="https://docs.python.org/3/library/math.html#math.lgamma" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">math.lgamma()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pi</span></code>: <code class="xref py py-func docutils literal notranslate"><span class="pre">math.pi()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">e</span></code>: <code class="xref py py-func docutils literal notranslate"><span class="pre">math.e()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tau</span></code>: <code class="xref py py-func docutils literal notranslate"><span class="pre">math.tau()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">inf</span></code>: <code class="xref py py-func docutils literal notranslate"><span class="pre">math.inf()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">nan</span></code>: <code class="xref py py-func docutils literal notranslate"><span class="pre">math.nan()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">abs</span></code>: <a class="reference external" href="https://docs.python.org/3/library/functions.html#abs" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">abs()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">round</span></code>: <a class="reference external" href="https://docs.python.org/3/library/functions.html#round" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">round()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pow</span></code>: <a class="reference external" href="https://docs.python.org/3/library/functions.html#pow" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">pow()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sum</span></code>: <a class="reference external" href="https://docs.python.org/3/library/functions.html#sum" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">sum()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">range</span></code>: <code class="xref py py-func docutils literal notranslate"><span class="pre">range()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">len</span></code>: <a class="reference external" href="https://docs.python.org/3/library/functions.html#len" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">len()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">min</span></code>: <a class="reference external" href="https://docs.python.org/3/library/functions.html#min" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">min()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max</span></code>: <a class="reference external" href="https://docs.python.org/3/library/functions.html#max" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">max()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">float</span></code>: <code class="xref py py-func docutils literal notranslate"><span class="pre">float()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">int</span></code>: <code class="xref py py-func docutils literal notranslate"><span class="pre">int()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">str</span></code>: <code class="xref py py-func docutils literal notranslate"><span class="pre">str()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bool</span></code>: <code class="xref py py-func docutils literal notranslate"><span class="pre">bool()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">list</span></code>: <code class="xref py py-func docutils literal notranslate"><span class="pre">list()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tuple</span></code>: <code class="xref py py-func docutils literal notranslate"><span class="pre">tuple()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enumerate</span></code>: <a class="reference external" href="https://docs.python.org/3/library/functions.html#enumerate" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">enumerate()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">getcwd</span></code>: <a class="reference external" href="https://docs.python.org/3/library/os.html#os.getcwd" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">os.getcwd()</span></code></a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">map</span></code>: <a class="reference external" href="https://docs.python.org/3/library/functions.html#map" title="(in Python v3.14)"><code class="xref py py-func docutils literal notranslate"><span class="pre">map()</span></code></a></p></li>
</ul>
<p>Additional funcitons can be added to the scope by definining the
<code class="xref py py-attr docutils literal notranslate"><span class="pre">expression_custom_functions</span></code> attribute and
listing either functionss or paths to Python files that contain functions.</p>
</section>
</section>
<section id="set-expressions">
<span id="id1"></span><h1>Set Expressions<a class="headerlink" href="#set-expressions" title="Link to this heading">#</a></h1>
<p>In the architecture, set expressions may reference the tensors and rank variables of the
specific Einsum being executed. Set expressions are evaluated for each Einsum +
Flattened-Architecture (<a class="reference internal" href="../spec/architecture.html#flattening"><span class="std std-ref">Flattening</span></a>) combination.</p>
<p>As an example of a set expression, we can describe all tensors that are not
intermediates using the following:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">~Intermediates</span>
</pre></div>
</div>
<p>Set expressions can use the full Python syntax, including the following:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&amp;</span></code>: Intersection</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">|</span></code>: Union</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">~</span></code>: Complement</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-</span></code>: Difference</p></li>
</ul>
<p>You may also use Pythonic language with set expressions in some locations. For example,
we may want to use input tensors if and only if there are three or fewer total tensors:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="l l-Scalar l-Scalar-Plain">Inputs if len(All) &gt; 3 else All</span>
</pre></div>
</div>
<p>Set expressions are evaluated for every Einsum + Flattened-Architecture (<a class="reference internal" href="../spec/architecture.html#flattening"><span class="std std-ref">Flattening</span></a>)
combination. The following set expressions are supported:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">All</span></code>: All tensors used in the current Einsum.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Inputs</span></code>: Tensors input to the current Einsum.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Intermediates</span></code>: Tensors produced by one Einsum and consumed by another.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Nothing</span></code>: The empty set.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Outputs</span></code>: Tensors output from the current Einsum.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Persistent</span></code>: Tensors that must remain in backing storage for the full duration of
the workloadâ€™s execution.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Shared</span></code>: Tensors that are shared between multiple Einsums.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Tensors</span></code>: Alias for <code class="docutils literal notranslate"><span class="pre">All</span></code>.</p></li>
</ul>
<p>Additionally, the following special variables are available:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Above</span></code>: The set of all tensors that are stored in all memory objects above the
current memory object in the hierarchy. Includes the same caveats as the previous
<code class="docutils literal notranslate"><span class="pre">MemoryObject</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;Any</span> <span class="pre">Tensor</span> <span class="pre">Name&gt;</span></code>: Resolves to the tensor with the given name. If the tensor is
not used in the current Einsum, then it resolves to the empty set.</p></li>
</ul>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">MemoryObject.Tensors</span></code>: The set of all tensors that are stored in the memory object.
Architectures are evaluated from the top down, so this will only be available
<code class="docutils literal notranslate"><span class="pre">MemoryObject</span></code> has been evaluated. Lower-level memory objects may reference upper-level
memory objects, but not vice versa. Additionally, this may not be used for energy and
area calculations.</p></li>
</ul>
<p>All tensor expressions can be converted into relevant rank variables by accessing
<code class="docutils literal notranslate"><span class="pre">.rank_variables</span></code>, which will return the set of all rank variables that index into the
tensor. If multiple tensors are referenced, then the union of all indexing rank
variables is returned. For example, <code class="docutils literal notranslate"><span class="pre">MemoryObject.tensors.rank_variables</span></code> will return
the set of all rank variables that index into any of the tensors stored in
<code class="docutils literal notranslate"><span class="pre">MemoryObject</span></code>.</p>
<p>Every tensor expression also has a <code class="docutils literal notranslate"><span class="pre">bits_per_value</span></code> attribute that returns the number
of bits per value for the tensor. This can only be called on size-one sets of tensors,
or else an error will be raised.</p>
<p>Additional keys can be defined following the renaming section of the <a class="reference internal" href="../spec/workload.html#renaming-tensors-rank-variables"><span class="std std-ref">Workload and
Renames Specification</span></a>.</p>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../spec/workload.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Workload and Renames Specification</p>
      </div>
    </a>
    <a class="right-next"
       href="yaml_parsing.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">YAML Parsing</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Expression Evaluation</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#included-functions">Included Functions</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#set-expressions">Set Expressions</a></li>
</ul>

  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/guide/parsing/evaluation.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 9.1.0.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>