
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Component Energy and Area &#8212; accelforge 0.1.0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../../_static/documentation_options.js?v=01f34227"></script>
    <script src="../../_static/doctools.js?v=fd6eb6e6"></script>
    <script src="../../_static/sphinx_highlight.js?v=6ffebe34"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'guide/modeling/component_energy_area';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Accelerator Energy, Area, and Latency" href="accelerator_energy_latency.html" />
    <link rel="prev" title="How Modeling Works" href="../modeling.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/logo.svg" class="logo__image only-light" alt="accelforge 0.1.0 documentation - Home"/>
    <img src="../../_static/logo.svg" class="logo__image only-dark pst-js-only" alt="accelforge 0.1.0 documentation - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../guide.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../modules.html">
    API Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../citation.html">
    Citing AccelForge
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../contributing.html">
    Contributing
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../guide.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../modules.html">
    API Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../citation.html">
    Citing AccelForge
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../contributing.html">
    Contributing
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../spec.html">Input Specifications</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../spec/architecture.html">Arch Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spec/mapping.html">Mapping Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../spec/workload.html">Workload and Renames Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../parsing/evaluation.html">Expression Evaluation</a></li>

<li class="toctree-l2"><a class="reference internal" href="../parsing/yaml_parsing.html">YAML Parsing</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../modeling.html">How Modeling Works</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Component Energy and Area</a></li>
<li class="toctree-l2"><a class="reference internal" href="accelerator_energy_latency.html">Accelerator Energy, Area, and Latency</a></li>
<li class="toctree-l2"><a class="reference internal" href="mapping.html">Mapping with Fast &amp; Fusiest</a></li>

</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../definitions.html">Definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faqs.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../timeloop_compare.html">Migrating from Timeloop</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../guide.html" class="nav-link">User Guide</a></li>
    
    
    <li class="breadcrumb-item"><a href="../modeling.html" class="nav-link">How Modeling Works</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Component Energy and Area</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="component-energy-and-area">
<span id="component-modeling"></span><h1>Component Energy and Area<a class="headerlink" href="#component-energy-and-area" title="Link to this heading">#</a></h1>
<p>The energy and area of components in the architecture can either be specified directly
or by calls to the <a class="reference external" href="https://github.com/Accelergy-Project/hwcomponents">HWComponents</a>
library.</p>
<section id="calculating-energy-and-area">
<h2>Calculating Energy and Area<a class="headerlink" href="#calculating-energy-and-area" title="Link to this heading">#</a></h2>
<p>Component energy and area calculations will populate the following fields for each
component. If these fields are pre-specified, then they may be used as input to the
energy and area calculations.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">area</span></code>: The area of a single instance of this component in m^2. If set, area calculations will use this value.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">leak_power</span></code>: The leak power of a single instance of this component in W. If set, leak power calculations will use this value.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">actions[&lt;action</span> <span class="pre">name&gt;].energy</span></code>: Dynamic energy of this action. Per-action energy is multiplied by the component’s energy_scale and the action’s energy_scale.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">total_area</span></code>: The total area of all instances of this component in m^2. Do not set this value. It is calculated when the architecture’s area is calculated.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">total_leak_power</span></code>: The total leak power of all instances of this component in W. Do not set this value. It is calculated when the architecture’s leak power is calculated. If instances are power gated, actual leak power may be less than this value.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">component_modeling_log</span></code>:
A log of the energy and area calculations for this <cite>Component</cite>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">component_model</span></code>: The model to use for this <cite>Component</cite>. If not set, the model will be found with <cite>hwcomponents.get_models()</cite>. If set, the <cite>component_class</cite> will be ignored.</p></li>
</ul>
<p>Additionally, the following fields will affect the energy and area calculations:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">energy_scale</span></code>: The scale factor for dynamic energy of this component. For each action, multiplies this action’s energy. Multiplies the calculated energy of each action.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">leak_power_scale</span></code>: The scale factor for the leak power of this component. This is used to scale the leak power of this component. For example, if the leak power is 1 W and the scale factor is 2, then the leak power is 2 W.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">area_scale</span></code>: The scale factor for the area of this comxponent. This is used to scale the area of this component. For example, if the area is 1 m^2 and the scale factor is 2, then the area is 2 m^2.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n_parallel_instances</span></code>:
The number of parallel instances of this component. Increasing parallel instances will proportionally increase area and leakage, while reducing latency (unless latency calculation is overridden).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">actions[&lt;action</span> <span class="pre">name&gt;].energy_scale</span></code>:
The scale factor for dynamic energy of this action. Multiplies this action’s energy by this value.</p></li>
</ul>
<p>The energy and area of a all components in the architecture can be calculated by calling
<a class="reference internal" href="../../accelforge.frontend.html#accelforge.frontend.spec.Spec.calculate_component_area_energy_latency_leak" title="accelforge.frontend.spec.Spec.calculate_component_area_energy_latency_leak"><code class="xref py py-meth docutils literal notranslate"><span class="pre">calculate_component_area_energy_latency_leak()</span></code></a>.
Note that an Einsum name can be provided to populate symbols with the Einsum’s symbols
from the workload; otherwise, if the architecture depends on something in the workload,
an error will be raised.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load the spec and calculate the energy and area of the entire design</span>
<span class="n">spec</span> <span class="o">=</span> <span class="n">af</span><span class="o">.</span><span class="n">Spec</span><span class="o">.</span><span class="n">from_yaml</span><span class="p">(</span><span class="n">examples_dir</span> <span class="o">/</span> <span class="s2">&quot;arches&quot;</span> <span class="o">/</span> <span class="s2">&quot;eyeriss.yaml&quot;</span><span class="p">)</span>
<span class="n">spec</span> <span class="o">=</span> <span class="n">spec</span><span class="o">.</span><span class="n">calculate_component_area_energy_latency_leak</span><span class="p">()</span>

<span class="c1"># Print out the total area and leakage power of the entire design</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Total area of the design: </span><span class="si">{</span><span class="n">spec</span><span class="o">.</span><span class="n">arch</span><span class="o">.</span><span class="n">total_area</span><span class="si">:</span><span class="s1">.2e</span><span class="si">}</span><span class="s1"> m^2&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Area breakdown per component:&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">component</span><span class="p">,</span> <span class="n">area</span> <span class="ow">in</span> <span class="n">spec</span><span class="o">.</span><span class="n">arch</span><span class="o">.</span><span class="n">per_component_total_area</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="se">\t</span><span class="si">{</span><span class="n">component</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">area</span><span class="si">:</span><span class="s1">.2e</span><span class="si">}</span><span class="s1"> m^2&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Total leakage power of the design: </span><span class="si">{</span><span class="n">spec</span><span class="o">.</span><span class="n">arch</span><span class="o">.</span><span class="n">total_leak_power</span><span class="si">:</span><span class="s1">.2e</span><span class="si">}</span><span class="s1"> W&#39;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">component</span><span class="p">,</span> <span class="n">leak_power</span> <span class="ow">in</span> <span class="n">spec</span><span class="o">.</span><span class="n">arch</span><span class="o">.</span><span class="n">per_component_total_leak_power</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="se">\t</span><span class="si">{</span><span class="n">component</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="n">leak_power</span><span class="si">:</span><span class="s1">.2e</span><span class="si">}</span><span class="s1"> W&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>We can also calculate the energy and area of individual components by calling
<a class="reference internal" href="../../accelforge.frontend.arch.html#accelforge.frontend.arch.Component.calculate_area_energy_latency_leak" title="accelforge.frontend.arch.Component.calculate_area_energy_latency_leak"><code class="xref py py-meth docutils literal notranslate"><span class="pre">calculate_area_energy_latency_leak()</span></code></a> on
them.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create the component from the yaml file</span>
<span class="kn">import</span> <span class="nn">accelforge</span> <span class="k">as</span> <span class="nn">af</span>
<span class="n">global_buffer</span> <span class="o">=</span> <span class="n">af</span><span class="o">.</span><span class="n">arch</span><span class="o">.</span><span class="n">Memory</span><span class="o">.</span><span class="n">from_yaml</span><span class="p">(</span>
    <span class="n">examples_dir</span> <span class="o">/</span> <span class="s2">&quot;misc&quot;</span> <span class="o">/</span> <span class="s2">&quot;component_annotated.yaml&quot;</span>
<span class="p">)</span>

<span class="c1"># Calculate the energy and area of the component</span>
<span class="n">global_buffer</span> <span class="o">=</span> <span class="n">global_buffer</span><span class="o">.</span><span class="n">calculate_area_energy_latency_leak</span><span class="p">()</span>

<span class="c1"># Print out the area, leak power, and energy for each action</span>
<span class="n">area</span> <span class="o">=</span> <span class="n">global_buffer</span><span class="o">.</span><span class="n">area</span>
<span class="n">leak_power</span> <span class="o">=</span> <span class="n">global_buffer</span><span class="o">.</span><span class="n">leak_power</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Area: </span><span class="si">{</span><span class="n">area</span><span class="si">:</span><span class="s2">.2e</span><span class="si">}</span><span class="s2"> m^2&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Leak power: </span><span class="si">{</span><span class="n">leak_power</span><span class="si">:</span><span class="s2">.2e</span><span class="si">}</span><span class="s2"> W&quot;</span><span class="p">)</span>
<span class="k">for</span> <span class="n">action</span> <span class="ow">in</span> <span class="n">global_buffer</span><span class="o">.</span><span class="n">actions</span><span class="p">:</span>
    <span class="n">energy</span> <span class="o">=</span> <span class="n">action</span><span class="o">.</span><span class="n">energy</span>
    <span class="n">latency</span> <span class="o">=</span> <span class="n">action</span><span class="o">.</span><span class="n">latency</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Action </span><span class="si">{</span><span class="n">action</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1"> energy </span><span class="si">{</span><span class="n">energy</span><span class="si">:</span><span class="s1">.2e</span><span class="si">}</span><span class="s1"> J, latency </span><span class="si">{</span><span class="n">latency</span><span class="si">:</span><span class="s1">.2e</span><span class="si">}</span><span class="s1">s&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>There are additional <a class="reference internal" href="../../accelforge.frontend.html#accelforge.frontend.config.Config" title="accelforge.frontend.config.Config"><code class="xref py py-class docutils literal notranslate"><span class="pre">Config</span></code></a> fields that affect
the energy and area calculations, which can be set in the
<a class="reference internal" href="../../accelforge.frontend.html#accelforge.frontend.spec.Spec" title="accelforge.frontend.spec.Spec"><code class="xref py py-class docutils literal notranslate"><span class="pre">Spec</span></code></a> object’s <code class="docutils literal notranslate"><span class="pre">config</span></code> field:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../accelforge.frontend.html#accelforge.frontend.config.Config.component_models" title="accelforge.frontend.config.Config.component_models"><code class="xref py py-attr docutils literal notranslate"><span class="pre">component_models</span></code></a>: A list of hwcomponents models to use for the energy and area calculations. These can
    either be paths to Python files that contain the models, or `hwcomponents`
    :py:class:`~hwcomponents.ComponentModel` objects.</p></li>
<li><p><a class="reference internal" href="../../accelforge.frontend.html#accelforge.frontend.config.Config.expression_custom_functions" title="accelforge.frontend.config.Config.expression_custom_functions"><code class="xref py py-attr docutils literal notranslate"><span class="pre">expression_custom_functions</span></code></a>: A list of functions to use while parsing expressions. These can either be functions
    or paths to Python files that contain the functions. If a path is provided, then all
    functions in the file will be added to the evaluator.</p></li>
<li><p><a class="reference internal" href="../../accelforge.frontend.html#accelforge.frontend.config.Config.use_installed_component_models" title="accelforge.frontend.config.Config.use_installed_component_models"><code class="xref py py-attr docutils literal notranslate"><span class="pre">use_installed_component_models</span></code></a>: If True, then the `hwcomponents` library will find all installed models. If False,
    then only the models specified in `component_models` will be used.</p></li>
</ul>
</section>
<section id="specifying-area-energy-latency-and-leak-power">
<h2>Specifying Area, Energy, Latency, and Leak Power<a class="headerlink" href="#specifying-area-energy-latency-and-leak-power" title="Link to this heading">#</a></h2>
<p>One way to specify the area, energy, latency, and leak power of each component is to
directly set the <code class="docutils literal notranslate"><span class="pre">area</span></code>, <code class="docutils literal notranslate"><span class="pre">leak_power</span></code>, <code class="docutils literal notranslate"><span class="pre">actions[&lt;action</span> <span class="pre">name&gt;].energy</span></code>, and
<code class="docutils literal notranslate"><span class="pre">actions[&lt;action</span> <span class="pre">name&gt;].latency</span></code> fields. The following example from the TPU v4i
example architecture shows uses this approach:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GlobalBuffer</span>
<span class="nt">size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1024*1024*128*8</span><span class="w"> </span><span class="c1"># 128MB</span>
<span class="nt">total_latency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">max(read_latency, write_latency)</span><span class="w"> </span><span class="c1"># Separate ports</span>
<span class="nt">leak_power</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="nt">area</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">112e-6</span><span class="w"> </span><span class="c1"># 112 mm^2</span>
<span class="nt">actions</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="nv">read</span><span class="p p-Indicator">,</span><span class="nt"> energy</span><span class="p">:</span><span class="w"> </span><span class="nv">1.88e-12</span><span class="p p-Indicator">,</span><span class="nt"> latency</span><span class="p">:</span><span class="w"> </span><span class="nv">1 / (8 * 2048e9)</span><span class="p p-Indicator">}</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="nv">write</span><span class="p p-Indicator">,</span><span class="nt"> energy</span><span class="p">:</span><span class="w"> </span><span class="nv">2.36e-12</span><span class="p p-Indicator">,</span><span class="nt"> latency</span><span class="p">:</span><span class="w"> </span><span class="nv">1 / (8 * 1024e9)</span><span class="p p-Indicator">}</span>
<span class="nt">tensors</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{</span><span class="nt">keep</span><span class="p">:</span><span class="w"> </span><span class="nv">~MainMemory.tensors</span><span class="p p-Indicator">,</span><span class="nt"> may_keep</span><span class="p">:</span><span class="w"> </span><span class="nv">All</span><span class="p p-Indicator">}</span>
</pre></div>
</div>
<p>If any value is omitted, it will raise an appropriate error when
<a class="reference internal" href="../../accelforge.frontend.html#accelforge.frontend.spec.Spec.calculate_component_area_energy_latency_leak" title="accelforge.frontend.spec.Spec.calculate_component_area_energy_latency_leak"><code class="xref py py-meth docutils literal notranslate"><span class="pre">calculate_component_area_energy_latency_leak()</span></code></a>
is called, so you may call this function to check whether you’ve missed anything.
<code class="docutils literal notranslate"><span class="pre">hwcomponents</span></code> is invoked automatically if any of the fields are missing. If you don’t
want it to be called, then you can do one of the following:</p>
<ul class="simple">
<li><p>If calling
<a class="reference internal" href="../../accelforge.frontend.html#accelforge.frontend.spec.Spec.calculate_component_area_energy_latency_leak" title="accelforge.frontend.spec.Spec.calculate_component_area_energy_latency_leak"><code class="xref py py-meth docutils literal notranslate"><span class="pre">calculate_component_area_energy_latency_leak()</span></code></a>,
then you can set <code class="docutils literal notranslate"><span class="pre">spec.config.component_models</span></code> and
<code class="docutils literal notranslate"><span class="pre">spec.config.use_installed_component_models</span></code> to an empty list and <code class="docutils literal notranslate"><span class="pre">False</span></code>,
respectively.</p></li>
<li><p>If calling
<a class="reference internal" href="../../accelforge.frontend.arch.html#accelforge.frontend.arch.Component.calculate_area_energy_latency_leak" title="accelforge.frontend.arch.Component.calculate_area_energy_latency_leak"><code class="xref py py-meth docutils literal notranslate"><span class="pre">calculate_area_energy_latency_leak()</span></code></a>,
then you can set <code class="docutils literal notranslate"><span class="pre">models</span></code> to an empty list.</p></li>
</ul>
</section>
<section id="using-the-hwcomponents-library">
<h2>Using the <code class="docutils literal notranslate"><span class="pre">hwcomponents</span></code> Library<a class="headerlink" href="#using-the-hwcomponents-library" title="Link to this heading">#</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">hwcomponents</span></code> is invoked automatically when area and energy are not specified. The
following shows the fields used by <code class="docutils literal notranslate"><span class="pre">hwcomponents</span></code>:</p>
<div class="code yaml highlight-default notranslate"><div class="highlight"><pre><span></span># The YAML tag at the beginning of the component tells the parser what type of component
# it is.
!Memory

name: GlobalBuffer

# This component_class invokes the hwcomponents_library.SmartBufferSRAM model. The
# component is a SRAM buffer with an address register that is updated on every
# access to queue up the next data.
component_class: SmartBufferSRAM

# Set the size to 16384 bits (64 bits wide, 256 deep)
size: 16384

# Sometimes, hwcomponents models require additional attributes that are not part of the
# accelforge spec. These can be passed to the component models through the
# extra_attributes_for_component_model field.
extra_attributes_for_component_model:
  width: 64
  n_banks: 32
  tech_node: 65e-9

# Actions that the hwcomponents_library model must support. All action attributes that
# can are passed to the model&#39;s appropriate method (in this case, `read` or `write`).
# The `bits_per_action` argument is special because it determines how many bits are
# transferred by each read or write. Additionally, to pass extra attributes to the
# component model as arguments, actions also have a extra_attributes_for_component_model
# field.

# For many component models, energy and latency are measured per-bit, so bits_per_action
# may be omitted in these cases.
actions:
- {name: read, bits_per_action: 64}
- {name: write, bits_per_action: 64}
</pre></div>
</div>
<p>When <code class="docutils literal notranslate"><span class="pre">hwcomponents</span></code> has been used to calculate the energy and area of a component,
then the <code class="docutils literal notranslate"><span class="pre">component_model</span></code> field will be set to the <code class="docutils literal notranslate"><span class="pre">hwcomponents</span></code> model used to
calculate the energy and area.</p>
<p>In addition to looking at the <code class="docutils literal notranslate"><span class="pre">component_modeling_log</span></code> field, we can further inspect
the <code class="docutils literal notranslate"><span class="pre">component_model</span></code> field to see more information about the model.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">message</span> <span class="ow">in</span> <span class="n">global_buffer</span><span class="o">.</span><span class="n">component_modeling_log</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>

<span class="n">component_model</span> <span class="o">=</span> <span class="n">global_buffer</span><span class="o">.</span><span class="n">component_model</span>
<span class="nb">print</span><span class="p">(</span><span class="n">help</span><span class="p">(</span><span class="n">component_model</span><span class="p">))</span> <span class="c1"># Get documentation for the model</span>

<span class="c1"># The model is a hwcomponents_library.SmartBufferSRAM object!</span>
<span class="kn">from</span> <span class="nn">hwcomponents_library</span> <span class="kn">import</span> <span class="n">SmartBufferSRAM</span>

<span class="c1"># Type hint it for our IDE</span>
<span class="n">component_model</span><span class="p">:</span> <span class="n">SmartBufferSRAM</span> <span class="o">=</span> <span class="n">global_buffer</span><span class="o">.</span><span class="n">component_model</span>

<span class="c1"># Inspect the area of each of its subcomponents</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Area: </span><span class="si">{</span><span class="n">component_model</span><span class="o">.</span><span class="n">area</span><span class="si">:</span><span class="s1">.2e</span><span class="si">}</span><span class="s1"> m^2&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">SRAM area: </span><span class="si">{</span><span class="n">component_model</span><span class="o">.</span><span class="n">sram</span><span class="o">.</span><span class="n">area</span><span class="si">:</span><span class="s1">.2e</span><span class="si">}</span><span class="s1"> m^2&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">Adder area: </span><span class="si">{</span><span class="n">component_model</span><span class="o">.</span><span class="n">adder</span><span class="o">.</span><span class="n">area</span><span class="si">:</span><span class="s1">.2e</span><span class="si">}</span><span class="s1"> m^2&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">Address register area: </span><span class="si">{</span><span class="n">component_model</span><span class="o">.</span><span class="n">address_reg</span><span class="o">.</span><span class="n">area</span><span class="si">:</span><span class="s1">.2e</span><span class="si">}</span><span class="s1"> m^2&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">Delta reg area: </span><span class="si">{</span><span class="n">component_model</span><span class="o">.</span><span class="n">delta_reg</span><span class="o">.</span><span class="n">area</span><span class="si">:</span><span class="s1">.2e</span><span class="si">}</span><span class="s1"> m^2&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../modeling.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">How Modeling Works</p>
      </div>
    </a>
    <a class="right-next"
       href="accelerator_energy_latency.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Accelerator Energy, Area, and Latency</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#calculating-energy-and-area">Calculating Energy and Area</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#specifying-area-energy-latency-and-leak-power">Specifying Area, Energy, Latency, and Leak Power</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#using-the-hwcomponents-library">Using the <code class="docutils literal notranslate"><span class="pre">hwcomponents</span></code> Library</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/guide/modeling/component_energy_area.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 9.1.0.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>